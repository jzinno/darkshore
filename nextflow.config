profiles {
    stub {
        stubRun = true
        process {
            {
                executor = 'local'
                cpus = 1
                memory = '1 GB'
                time = '1h'
            }
        }
        params{
            bam_list = "test/test-dna-input.txt"
            rna_fastq_table = "test/test-rna-input.txt"
            sample_id = "test"
            call_mito = true
        }
        conda.enabled = false
    }
}

process {
    executor = 'slurm'
    errorStrategy = { task.exitStatus in [143,137,104,134,139] ? 'retry' : 'terminate' }
    maxRetries = 2
    maxErrors = '-1'
    cache = 'lenient'
}

executor {
  queueSize = 196
  submitRateLimit = '100/2min'
}

conda.enabled = true

params {
    bam_list = "bams.txt"  // A text file with the path to each BAM file on a separate line
    rna_fastq_table="rna_test.txt"
    joint_vcf = "test.vcf.gz"
    n_tree_search = 10
    ref = "/gpfs/commons/groups/landau_lab/ug-sc1000-dev/ref/hg38/v0/Homo_sapiens_assembly38.fasta"
    gtf = "/gpfs/commons/groups/landau_lab/rraviram/hg38/refdata-gex-GRCh38-2020-A/genes/genes.gtf"
    model = "/gpfs/commons/home/jzinno/ug-deepvariant/Ultima_parabricks_4.0.4-1.ultimadeepvar2_V100_noTF32.eng"
    out = "output"
    sample_id = "test"
    call_mito = true
    run_phylo = false
    use_gpu = false
}